<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auto-Update (Basic) — Brew Scripts</title>
  <meta name="description" content="Runs Homebrew update, upgrade, and cleanup operations automatically. Sends a text message summary via iMessage when complete. Checks WiFi and power status before running.">
  <meta name="author" content="CodeCraftedApps">
  <link rel="canonical" href="https://brewscripts.codecraftedapps.com/scripts/auto-update-brew.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Auto-Update (Basic) — Brew Scripts">
  <meta property="og:description" content="Runs Homebrew update, upgrade, and cleanup operations automatically. Sends a text message summary via iMessage when complete. Checks WiFi and power status before running.">
  <meta property="og:url" content="https://brewscripts.codecraftedapps.com/scripts/auto-update-brew.html">
  <meta property="og:site_name" content="Brew Scripts">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Auto-Update (Basic) — Brew Scripts">
  <meta name="twitter:description" content="Runs Homebrew update, upgrade, and cleanup operations automatically. Sends a text message summary via iMessage when complete. Checks WiFi and power status before running.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#0f1117">
  <meta name="color-scheme" content="dark">
  <link rel="icon" type="image/png" href="../favicon.png">
  <link rel="apple-touch-icon" href="../apple-touch-icon.png">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>
  <header class="site-header">
    <div class="container">
      <a href="../index.html" class="site-logo">Brew<span>Scripts</span></a>
      <button class="nav-toggle" aria-label="Toggle navigation">&#9776;</button>
      <nav class="site-nav">
        <a href="../index.html">Home</a>
        <a href="../getting-started.html">Getting Started</a>
        <a href="../guides.html">Guides</a>
        <a href="../scripts.html" class="active">Scripts</a>
        <a href="../faq.html">FAQ</a>
        <a href="../about.html">About</a>
      </nav>
    </div>
  </header>

  <main id="main">
    <nav class="breadcrumbs container" aria-label="Breadcrumb">
      <a href="../index.html">Home</a><span class="separator">/</span><a href="../scripts.html">Scripts</a><span class="separator">/</span>Auto-Update (Basic)
    </nav>

    <div class="page-header">
      <div class="container">
        <h1>Auto-Update (Basic)</h1>
        <p>Automated Homebrew updates with text message notifications via iMessage.</p>
        <div class="script-meta">
          <span class="script-meta-item">&#128196; auto-update-brew.sh</span>
          <span class="script-meta-item">&#128737; Automation</span>
          <span class="script-meta-item">&#128187; macOS 12.0+</span>
        </div>
        <div class="script-actions">
          <a href="https://raw.githubusercontent.com/DJCastle/homeBrewScripts/main/auto-update-brew.sh" class="btn-primary" download>Download Script</a>
          <a href="https://github.com/DJCastle/homeBrewScripts/blob/main/auto-update-brew.sh" class="btn-secondary" target="_blank" rel="noopener noreferrer">View on GitHub</a>
        </div>
      </div>
    </div>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>What This Script Does</h2>
          <p>The <code>auto-update-brew.sh</code> script automates the routine maintenance of your Homebrew packages. Keeping your packages up to date is important for security patches, bug fixes, and access to new features, but remembering to run updates manually can be tedious. This script handles the entire update cycle automatically and sends you a text message summary when it finishes, so you always know the current state of your system without having to check manually.</p>
          <p>Before performing any updates, the script runs a series of pre-flight checks to ensure conditions are appropriate for an unattended update. The first check verifies your Wi-Fi connection. If you have configured a <code>WIFI_NETWORK</code> in your config file, the script compares your current network name against that setting. This prevents the script from downloading potentially large updates over a metered cellular hotspot or a slow public Wi-Fi connection. If the network does not match, the script exits gracefully and logs the reason.</p>
          <p>The second pre-flight check examines your Mac's power status. Running package updates can be CPU-intensive and may take several minutes, which is not ideal when your Mac is running on battery power. If <code>REQUIRE_AC_POWER</code> is enabled in your config, the script verifies that your Mac is plugged into an AC adapter before proceeding. If you are on battery power, the update is skipped and rescheduled for the next scheduled run.</p>
          <p>Once the pre-flight checks pass, the script performs three core Homebrew operations in sequence. First, it runs <code>brew update</code>, which downloads the latest package index from Homebrew's repositories. This tells Homebrew what new versions are available but does not install anything yet. Second, it runs <code>brew upgrade</code>, which actually installs newer versions of any outdated packages. Each package upgrade is logged individually so you can see exactly what changed. Third, it runs <code>brew cleanup</code>, which removes old versions of packages that are no longer needed and clears the download cache to free up disk space.</p>
          <p>After all three operations complete, the script compiles a summary of the results. This summary includes the number of packages that were updated, any errors that occurred during the process, and the amount of disk space recovered by the cleanup step. The summary is then sent to your phone as an iMessage text message using macOS's built-in <code>osascript</code> command to interface with the Messages app. This gives you a quick at-a-glance notification that your system is up to date.</p>
          <p>The script is designed to be run either manually or on a schedule via launchd. When run manually, you see all output in real time in your terminal. When run on a schedule, the output is captured in a log file and the text message notification serves as your primary status report. For scheduling, see the <a href="setup-auto-update.html">Schedule Auto-Updates</a> script, which automates the creation of the launchd agent.</p>
        </div>
      </div>
    </section>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>Usage</h2>
          <p>You can run this script manually at any time, or schedule it to run automatically using the setup-auto-update.sh script.</p>
          <pre><code># Preview what would be updated (no changes made)
./auto-update-brew.sh --dry-run

# Run the update immediately
./auto-update-brew.sh</code></pre>
          <p>When running manually, you will see progress output in your terminal as each Homebrew operation completes. The text message notification is sent at the very end, after all operations have finished.</p>
        </div>
      </div>
    </section>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>Options and Flags</h2>
          <table>
            <thead>
              <tr>
                <th>Flag</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>--dry-run</code></td>
                <td>Simulate the update process. Shows which packages are outdated and what would be updated, but does not install or remove anything.</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>Configuration</h2>
          <p>The following settings in your <code>config/homebrew-scripts.conf</code> file affect this script's behavior:</p>
          <table>
            <thead>
              <tr>
                <th>Setting</th>
                <th>Effect</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>WIFI_NETWORK</code></td>
                <td>The name of your preferred Wi-Fi network. Updates only run when connected to this network. Leave empty to allow updates on any network.</td>
              </tr>
              <tr>
                <td><code>PHONE_NUMBER</code></td>
                <td>Your iMessage-compatible phone number for receiving text message notifications. Include the country code (e.g., <code>+1</code> for US numbers).</td>
              </tr>
              <tr>
                <td><code>REQUIRE_AC_POWER</code></td>
                <td>When set to <code>true</code>, the script only runs when your Mac is connected to AC power. Prevents updates from draining battery.</td>
              </tr>
            </tbody>
          </table>
          <p>If <code>PHONE_NUMBER</code> is not configured, the script still performs all update operations but skips the text message notification step. All results are still recorded in the log file regardless of the notification setting.</p>
        </div>
      </div>
    </section>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>What Gets Changed</h2>
          <ul>
            <li><strong>Homebrew packages</strong> &mdash; All installed formulae and casks are updated to their latest available versions via <code>brew upgrade</code>.</li>
            <li><strong>Old package versions</strong> &mdash; Previous versions of upgraded packages are removed by <code>brew cleanup</code> to reclaim disk space.</li>
            <li><strong>Download cache</strong> &mdash; Cached installer files in Homebrew's download directory are cleared during the cleanup phase.</li>
            <li><strong>iMessage</strong> &mdash; A text message is sent to your configured phone number via the macOS Messages app. This uses AppleScript and does not require any third-party services or API keys.</li>
            <li><strong>Log file</strong> &mdash; A detailed log is created at <code>~/Library/Logs/</code> recording every package that was updated, any errors, and the cleanup results.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="content-section reveal">
      <div class="container">
        <div class="content-body">
          <h2>Related Scripts</h2>
          <ul>
            <li><a href="auto-update-brew-hybrid.html">Auto-Update with Email &amp; Text</a> &mdash; An enhanced version of this script that also sends a detailed email report in addition to the text message summary.</li>
            <li><a href="setup-auto-update.html">Schedule Auto-Updates</a> &mdash; Automates the creation of a macOS launchd agent so this script runs on a recurring schedule without manual intervention.</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-brand">
          <a href="../index.html" class="site-logo">Brew<span>Scripts</span></a>
          <p class="footer-tagline">Homebrew automation scripts for macOS — learn shell scripting while automating your Mac setup.</p>
        </div>
        <div class="footer-column">
          <h4>Resources</h4>
          <a href="../getting-started.html">Getting Started</a>
          <a href="../guides.html">Guides</a>
          <a href="../scripts.html">Scripts</a>
          <a href="../faq.html">FAQ</a>
        </div>
        <div class="footer-column">
          <h4>Project</h4>
          <a href="../about.html">About</a>
          <a href="../contact.html">Contact</a>
          <a href="../privacy.html">Privacy Policy</a>
          <a href="../terms.html">Terms of Service</a>
          <a href="https://github.com/DJCastle/homeBrewScripts" target="_blank" rel="noopener noreferrer">GitHub</a>
          <a href="https://codecraftedapps.com" target="_blank" rel="noopener noreferrer">CodeCraftedApps</a>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2026 CodeCraftedApps. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <button class="back-to-top" aria-label="Back to top">&uarr;</button>

  <script>
  (function() {
    var toggle = document.querySelector('.nav-toggle');
    var nav = document.querySelector('.site-nav');
    toggle.addEventListener('click', function(e) {
      e.stopPropagation();
      nav.classList.toggle('open');
    });
    document.addEventListener('click', function(e) {
      if (!nav.contains(e.target) && !toggle.contains(e.target)) {
        nav.classList.remove('open');
      }
    });

    var reveals = document.querySelectorAll('.reveal');
    if (reveals.length) {
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      reveals.forEach(function(el) { observer.observe(el); });
    }

    var backToTop = document.querySelector('.back-to-top');
    if (backToTop) {
      window.addEventListener('scroll', function() {
        if (window.scrollY > 300) {
          backToTop.classList.add('visible');
        } else {
          backToTop.classList.remove('visible');
        }
      });
      backToTop.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
  })();
  </script>

  <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="codecraftopensource" data-description="Support me on Buy me a coffee!" data-message="Thank you for visiting and for your support." data-color="#F59E0B" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
</body>
</html>